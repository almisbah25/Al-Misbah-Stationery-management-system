<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U-4 Stationary Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS remains the same as provided with some enhancements */
        :root {
            --primary: #0d47a1;
            --primary-light: #5472d3;
            --primary-dark: #002171;
            --secondary: #00838f;
            --secondary-light: #4fb3bf;
            --secondary-dark: #005662;
            --accent: #e65100;
            --accent-light: #ff9e40;
            --text-primary: #263238;
            --text-secondary: #546e7a;
            --text-light: #ffffff;
            --background: #f5f7fa;
            --card-bg: #ffffff;
            --border: #e0e6ed;
            --success: #00897b;
            --warning: #ffa000;
            --error: #d32f2f;
            --shadow: rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --gradient: linear-gradient(135deg, #0d47a1, #5472d3);
            --card-gradient: linear-gradient(135deg, #ffffff, #f5f7fa);
            --glass-bg: rgba(255, 255, 255, 0.85);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Enhanced Login Form Styles */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0d47a1, #5472d3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: all 0.5s ease;
        }
        .login-container.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .login-form {
            background: var(--glass-bg);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 450px;
            max-width: 90%;
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.6s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .login-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .login-header h2 {
            color: var(--primary);
            font-size: 2.2rem;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        .login-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        .form-group {
            margin-bottom: 25px;
            position: relative;
        }
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.95rem;
        }
        .form-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.8);
        }
        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(13, 71, 161, 0.1);
            background: var(--card-bg);
        }
        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s ease;
        }
        .login-btn:hover::before {
            left: 100%;
        }
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(13, 71, 161, 0.3);
        }
        .error-message {
            color: var(--error);
            margin-top: 20px;
            text-align: center;
            font-weight: 500;
            display: none;
            padding: 12px;
            background: rgba(211, 47, 47, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--error);
        }
        .user-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 12px var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--gradient);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        .logout-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: var(--transition);
        }
        .logout-btn:hover {
            background: rgba(13, 71, 161, 0.1);
            color: var(--primary);
        }
        
        /* Header Styles */
        header {
            background: var(--gradient);
            color: var(--text-light);
            padding: 40px 0;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 8px 30px var(--shadow);
            position: relative;
            overflow: hidden;
        }
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(45deg);
            animation: pulse 8s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: rotate(45deg) scale(1); }
            50% { transform: rotate(45deg) scale(1.1); }
        }
        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 0 20px;
        }
        h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            letter-spacing: 1.5px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        .header-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            font-weight: 300;
            letter-spacing: 0.5px;
        }
        
        /* Dashboard Section */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        .dashboard-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 20px var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            background: var(--card-gradient);
            border: 1px solid var(--border);
        }
        .dashboard-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px var(--shadow);
        }
        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: var(--primary);
            transition: height 0.3s ease;
        }
        .dashboard-card:hover::before {
            height: 0;
            width: 100%;
            background: var(--gradient);
            border-radius: 0 15px 15px 0;
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .card-title {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--text-light);
            transition: var(--transition);
        }
        .dashboard-card:hover .card-icon {
            transform: rotate(10deg) scale(1.1);
        }
        .card-icon.primary {
            background: var(--gradient);
        }
        .card-icon.secondary {
            background: linear-gradient(135deg, #00838f, #4fb3bf);
        }
        .card-icon.accent {
            background: linear-gradient(135deg, #e65100, #ff9e40);
        }
        .card-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: 1px;
        }
        
        /* Controls Section */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            justify-content: space-between;
            align-items: center;
        }
        .search-box {
            flex-grow: 1;
            max-width: 450px;
            position: relative;
        }
        .search-box input {
            width: 100%;
            padding: 15px 25px 15px 50px;
            border: 1px solid var(--border);
            border-radius: 50px;
            font-size: 1rem;
            transition: var(--transition);
            background: var(--card-bg);
        }
        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(13, 71, 161, 0.1);
        }
        .search-box i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s ease;
        }
        .btn:hover::before {
            left: 100%;
        }
        .btn-primary {
            background: var(--gradient);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(13, 71, 161, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #00838f, #4fb3bf);
        }
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 131, 143, 0.3);
        }
        .btn-accent {
            background: linear-gradient(135deg, #e65100, #ff9e40);
        }
        .btn-accent:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(230, 81, 0, 0.3);
        }
        
        /* Table Styles */
        .table-container {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 6px 20px var(--shadow);
            margin-bottom: 40px;
            border: 1px solid var(--border);
        }
        .table-header {
            background: var(--gradient);
            color: var(--text-light);
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .table-title {
            font-size: 1.3rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 18px 20px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            background: var(--primary-light);
            color: var(--text-light);
            font-weight: 500;
            position: sticky;
            top: 0;
            z-index: 10;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        tr:hover {
            background-color: rgba(0, 131, 143, 0.05);
        }
        .student-info {
            display: flex;
            align-items: center;
        }
        .student-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 15px;
            font-size: 1.2rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .student-details h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--primary);
        }
        .student-details p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0;
        }
        .stationary-list {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        .stationary-item {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 50px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .stationary-item:hover {
            border-color: var(--primary);
            background: rgba(13, 71, 161, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        .stationary-item.selected {
            background: rgba(13, 71, 161, 0.1);
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.1);
        }
        .stationary-item.selected::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(13, 71, 161, 0.1), rgba(84, 114, 211, 0.1));
            pointer-events: none;
        }
        .remove-selection {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: var(--error);
            color: white;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }
        .stationary-item.selected .remove-selection {
            display: flex;
        }
        .remove-selection:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .quantity-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--card-bg);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        .quantity-btn:hover {
            background: var(--primary);
            color: var(--text-light);
            border-color: var(--primary);
        }
        .quantity-input {
            width: 40px;
            height: 28px;
            border: 1px solid var(--border);
            border-radius: 4px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .item-price {
            color: var(--secondary);
            font-weight: 600;
        }
        .student-total {
            font-weight: 600;
            color: var(--accent);
            font-size: 1.2rem;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
        }
        .action-btn {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            border: none;
            background: var(--background);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
        }
        .action-btn:hover {
            background: var(--primary);
            color: var(--text-light);
            transform: scale(1.1);
        }
        
        /* Summary Section */
        .summary-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        .summary-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 20px var(--shadow);
            background: var(--card-gradient);
            border: 1px solid var(--border);
        }
        .summary-title {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }
        .summary-list {
            list-style: none;
        }
        .summary-list li {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }
        .summary-list li:last-child {
            border-bottom: none;
        }
        .summary-item {
            font-weight: 500;
        }
        .summary-value {
            color: var(--secondary);
            font-weight: 600;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 18px 25px;
            background: var(--success);
            color: var(--text-light);
            border-radius: 8px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 4px solid rgba(255, 255, 255, 0.3);
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.error {
            background: var(--error);
        }
        .notification.warning {
            background: var(--warning);
            color: var(--text-primary);
        }
        
        /* Print Button */
        .print-btn {
            position: fixed;
            bottom: 25px;
            right: 25px;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00838f, #4fb3bf);
            color: var(--text-light);
            border: none;
            font-size: 26px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            z-index: 100;
        }
        .print-btn:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        /* Loading Spinner */
        .spinner {
            display: none;
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin: 25px auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 25px;
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-top: 40px;
            border-top: 1px solid var(--border);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .table-container {
                overflow-x: auto;
            }
            
            table {
                min-width: 700px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: 100%;
            }
            
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .summary-section {
                grid-template-columns: 1fr;
            }
            
            .login-form {
                padding: 35px;
            }
            
            .user-info {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 20px;
            }
        }
        @media print {
            .controls, .print-btn, .notification, .dashboard, .summary-section, .user-info {
                display: none;
            }
            
            body {
                background-color: white;
            }
            
            .table-container, .summary-section {
                box-shadow: none;
            }
        }
        
        /* Enhanced UI Elements */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .floating {
            animation: floating 4s ease-in-out infinite;
        }
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(13, 71, 161, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(13, 71, 161, 0); }
            100% { box-shadow: 0 0 0 0 rgba(13, 71, 161, 0); }
        }
        
        /* Login validation styles */
        .validation-message {
            position: absolute;
            bottom: -20px;
            left: 0;
            font-size: 0.8rem;
            color: var(--error);
            display: none;
        }
        .form-group.error input {
            border-color: var(--error);
        }
        .form-group.error .validation-message {
            display: block;
        }
        
        /* Stationary item selection indicator */
        .selection-indicator {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary);
            color: var(--text-light);
            padding: 10px 20px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 90;
            opacity: 0;
            transform: translateY(20px);
            transition: var(--transition);
        }
        .selection-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }
        .selected-count {
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Login Form -->
    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <div class="login-header">
                <h2>U-4 Stationary System</h2>
                <p>Please login to access the system</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter username" required>
                    <div class="validation-message">Please enter a valid username</div>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                    <div class="validation-message">Please enter a valid password</div>
                </div>
                <button type="submit" class="login-btn">Login</button>
                <div class="error-message" id="errorMessage">Invalid username or password</div>
            </form>
        </div>
    </div>
    
    <!-- User Info Bar -->
    <div class="user-info" id="userInfo" style="display: none;">
        <div class="user-avatar" id="userAvatar"></div>
        <span id="usernameDisplay"></span>
        <button class="logout-btn" onclick="logout()" title="Logout">
            <i class="fas fa-sign-out-alt"></i>
        </button>
    </div>
    
    <div class="container">
        <header>
            <div class="header-content">
                <h1>U-4 Stationary Management System</h1>
                <div class="header-subtitle">Professional Stationary Tracking for Class U-4 Students</div>
            </div>
        </header>
        
        <div class="dashboard">
            <div class="dashboard-card floating">
                <div class="card-header">
                    <div class="card-title">Total Students</div>
                    <div class="card-icon primary">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="card-value" id="totalStudents">33</div>
            </div>
            <div class="dashboard-card floating" style="animation-delay: 0.2s;">
                <div class="card-header">
                    <div class="card-title">Total Items</div>
                    <div class="card-icon secondary">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                </div>
                <div class="card-value" id="totalStationaryItems">32</div>
            </div>
            <div class="dashboard-card floating" style="animation-delay: 0.4s;">
                <div class="card-header">
                    <div class="card-title">Grand Total</div>
                    <div class="card-icon accent">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                </div>
                <div class="card-value" id="grandTotal">₹0</div>
            </div>
        </div>
        
        <div class="controls">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search students by name...">
            </div>
            <div>
                <button class="btn btn-primary pulse" onclick="calculateAllTotals()">
                    <i class="fas fa-calculator"></i> Calculate Total
                </button>
                <button class="btn btn-secondary" onclick="clearAllSelections()">
                    <i class="fas fa-eraser"></i> Clear All
                </button>
                <button class="btn btn-accent" onclick="exportToCSV()">
                    <i class="fas fa-download"></i> Export CSV
                </button>
            </div>
        </div>
        
        <div class="table-container">
            <div class="table-header">
                <div class="table-title">Student Stationary List</div>
                <div class="action-buttons">
                    <button class="action-btn" onclick="selectAllItems()" title="Select All Items">
                        <i class="fas fa-check-double"></i>
                    </button>
                    <button class="action-btn" onclick="deselectAllItems()" title="Deselect All Items">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <table id="stationaryTable">
                <thead>
                    <tr>
                        <th>Student Details</th>
                        <th>Stationary Items</th>
                        <th>Total Amount</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Table rows will be generated here -->
                </tbody>
            </table>
            <div class="spinner" id="loadingSpinner"></div>
        </div>
        
        <div class="summary-section">
            <div class="summary-card">
                <div class="summary-title">
                    <i class="fas fa-chart-pie"></i> Stationary Summary
                </div>
                <ul class="summary-list" id="stationarySummary">
                    <!-- Summary items will be generated here -->
                </ul>
            </div>
            <div class="summary-card">
                <div class="summary-title">
                    <i class="fas fa-user-graduate"></i> Top 5 Students
                </div>
                <ul class="summary-list" id="topStudents">
                    <!-- Top students will be generated here -->
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Selection Indicator -->
    <div class="selection-indicator" id="selectionIndicator">
        <i class="fas fa-check-circle"></i>
        <span>Selected: <span class="selected-count" id="selectedCount">0</span> items</span>
    </div>
    
    <button class="print-btn" onclick="window.print()">
        <i class="fas fa-print"></i>
    </button>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i> <span id="notificationText">Operation completed successfully!</span>
    </div>
    <script>
        // Stationary items with prices
        const stationaryItems = [
            { name: "Upper Blade", price: 12 },
            { name: "Pencils", price: 5 },
            { name: "Blue Pen", price: 10 },
            { name: "Black Pen", price: 10 },
            { name: "Gillate Guard", price: 25 },
            { name: "Closeup", price: 20 },
            { name: "Tooth Brush", price: 20 },
            { name: "Cloth Brush", price: 35 },
            { name: "Active", price: 5 },
            { name: "katah", price: 10 },
            { name: "Coloueful Lungi", price: 120 },
            { name: "White Lungi", price: 150 },
            { name: "Topi", price: 100 },
            { name: "Neel", price: 10 },
            { name: "Comfort", price: 60 },
            { name: "Doctor Wash", price: 35 },
            { name: "Ujala", price: 10 },
            { name: "Harbal", price: 20 },
            { name: "Pen Pencil", price: 20 },
            { name: "Detol", price: 10 },
            { name: "Lux", price: 10 },
            { name: "Centhol", price: 10 },
            { name: "Pears", price: 40 },
            { name: "Sony Bar", price: 50 },
            { name: "Mirror", price: 10 },
            { name: "Comb", price: 5 },
            { name: "Surf", price: 10 },
            { name: "Hanger", price: 70 },
            { name: "Cliniv Plus", price: 20 },
            { name: "Dove", price: 35 },
            { name: "Handkerchief", price: 25 },
            { name: "Bandi", price: 55 },
            { name: "Underwear", price: 80 }
        ];
        
        // Student data
        const students = [
            { name: "Ansari Ahmed", age: 12 },
            { name: "Kaish Ansari", age: 11 },
            { name: "Shahil Ali", age: 12 },
            { name: "Mustafa NPL", age: 11 },
            { name: "Huzaifa Ansari", age: 12 },
            { name: "Shahbaz Ansari", age: 11 },
            { name: "Anas Ansari", age: 12 },
            { name: "Abdul Alam", age: 11 },
            { name: "Hashmat Raza", age: 12 },
            { name: "Yusuf Ali", age: 11 },
            { name: "Atif Neyaz", age: 12 },
            { name: "Tausif Raza", age: 11 },
            { name: "Shamsuddin Hashmi", age: 12 },
            { name: "Mokarram Faiz", age: 11 },
            { name: "Faizan Raza", age: 12 },
            { name: "Hamza Ali", age: 11 },
            { name: "Arif Khan", age: 12 },
            { name: "Ahad Abbasi", age: 11 },
            { name: "Mudassir", age: 12 },
            { name: "Nematullah", age: 11 },
            { name: "Zulqarnain", age: 12 },
            { name: "Zeeshan", age: 11 },
            { name: "Esmatullah", age: 12 },
            { name: "Mubashir raza", age: 11 },
            { name: "Aman Rshad", age: 12 },
            { name: "Syed Abdul Ahad", age: 11 },
            { name: "Farhan Raza", age: 12 },
            { name: "Ahmed Raza", age: 11 },
            { name: "Meraj Khan", age: 12 },
            { name: "Junaid Ansari", age: 11 },
            { name: "Md Hasan", age: 12 },
            { name: "Ghulam Yazdani", age: 11 },
            { name: "Ahsan Ansari", age: 12 }
        ];
        
        // Enhanced Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim().toUpperCase();
            const password = document.getElementById('password').value.trim();
            
            // Clear previous error states
            document.querySelectorAll('.form-group').forEach(group => {
                group.classList.remove('error');
            });
            
            // Validate inputs
            let hasError = false;
            
            if (username.length < 3) {
                document.getElementById('username').closest('.form-group').classList.add('error');
                hasError = true;
            }
            
            if (password.length < 6) {
                document.getElementById('password').closest('.form-group').classList.add('error');
                hasError = true;
            }
            
            if (hasError) {
                showNotification('Please fill in all fields correctly', 'warning');
                return;
            }
            
            // Enhanced login validation
            const validUsers = {
                "KAISH": { password: "ALMISBAH25BATCH", name: "Kaish Ansari" },
                "MERAJ": { password: "ALMISBAH25BATCH", name: "Meraj Khan" },
                "HASAN": { password: "ALMISBAH25BATCH", name: "Md Hasan" }
            };
            
            if (validUsers[username] && validUsers[username].password === password) {
                // Store login information
                localStorage.setItem('isLoggedIn', 'true');
                localStorage.setItem('currentUser', JSON.stringify({
                    username: username,
                    name: validUsers[username].name,
                    loginTime: new Date().toISOString()
                }));
                
                // Hide login form
                document.getElementById('loginContainer').classList.add('hidden');
                
                // Show user info
                showUserInfo(username, validUsers[username].name);
                
                // Show welcome notification
                showNotification(`Welcome, ${validUsers[username].name}!`, 'success');
                
                // Initialize the system
                setTimeout(() => {
                    generateTableRows();
                    document.getElementById('totalStudents').textContent = students.length;
                    document.getElementById('totalStationaryItems').textContent = stationaryItems.length;
                }, 500);
            } else {
                // Show error message
                document.getElementById('errorMessage').style.display = 'block';
                
                // Shake the form
                const loginForm = document.querySelector('.login-form');
                loginForm.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    loginForm.style.animation = '';
                }, 500);
                
                showNotification('Invalid username or password', 'error');
            }
        });
        
        // Show user info
        function showUserInfo(username, displayName) {
            const userInfo = document.getElementById('userInfo');
            const userAvatar = document.getElementById('userAvatar');
            const usernameDisplay = document.getElementById('usernameDisplay');
            
            userInfo.style.display = 'flex';
            userAvatar.textContent = displayName.charAt(0);
            usernameDisplay.textContent = displayName;
        }
        
        // Logout functionality
        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('currentUser');
            
            // Clear form data
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            
            // Show login form
            document.getElementById('loginContainer').classList.remove('hidden');
            
            // Hide user info
            document.getElementById('userInfo').style.display = 'none';
            
            showNotification('You have been logged out successfully', 'success');
        }
        
        // Add shake animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);
        
        // Generate table rows
        function generateTableRows() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            students.forEach((student, studentIndex) => {
                const row = document.createElement('tr');
                row.setAttribute('data-name', student.name.toLowerCase());
                
                // Student details cell
                const studentCell = document.createElement('td');
                const studentInfo = document.createElement('div');
                studentInfo.className = 'student-info';
                
                const studentAvatar = document.createElement('div');
                studentAvatar.className = 'student-avatar';
                studentAvatar.textContent = student.name.charAt(0);
                
                const studentDetails = document.createElement('div');
                studentDetails.className = 'student-details';
                
                const studentName = document.createElement('h4');
                studentName.textContent = student.name;
                
                const studentId = document.createElement('p');
                studentId.textContent = `Student ID: STU${1000 + studentIndex}`;
                
                studentDetails.appendChild(studentName);
                studentDetails.appendChild(studentId);
                
                studentInfo.appendChild(studentAvatar);
                studentInfo.appendChild(studentDetails);
                studentCell.appendChild(studentInfo);
                
                // Stationary items cell
                const stationaryCell = document.createElement('td');
                const stationaryList = document.createElement('div');
                stationaryList.className = 'stationary-list';
                
                stationaryItems.forEach((item, itemIndex) => {
                    const stationaryItem = document.createElement('div');
                    stationaryItem.className = 'stationary-item';
                    stationaryItem.setAttribute('data-student-index', studentIndex);
                    stationaryItem.setAttribute('data-item-index', itemIndex);
                    
                    const itemLabel = document.createElement('span');
                    itemLabel.textContent = item.name;
                    
                    const itemPrice = document.createElement('span');
                    itemPrice.className = 'item-price';
                    itemPrice.textContent = `₹${item.price}`;
                    
                    // Quantity selector
                    const quantitySelector = document.createElement('div');
                    quantitySelector.className = 'quantity-selector';
                    
                    const decreaseBtn = document.createElement('button');
                    decreaseBtn.className = 'quantity-btn';
                    decreaseBtn.innerHTML = '<i class="fas fa-minus"></i>';
                    decreaseBtn.onclick = function() {
                        const input = quantityInput;
                        const currentValue = parseInt(input.value);
                        if (currentValue > 0) {
                            input.value = currentValue - 1;
                            saveQuantity(studentIndex, itemIndex, currentValue - 1);
                            calculateStudentTotal(studentIndex);
                        }
                    };
                    
                    const quantityInput = document.createElement('input');
                    quantityInput.type = 'number';
                    quantityInput.className = 'quantity-input';
                    quantityInput.min = '0';
                    quantityInput.value = '0';
                    
                    // Load saved quantity from localStorage
                    const savedQuantity = localStorage.getItem(`student-${studentIndex}-item-${itemIndex}-quantity`);
                    if (savedQuantity !== null) {
                        quantityInput.value = savedQuantity;
                    }
                    
                    // Add event listener to save quantity
                    quantityInput.addEventListener('change', function() {
                        const value = parseInt(this.value) || 0;
                        this.value = value;
                        saveQuantity(studentIndex, itemIndex, value);
                        calculateStudentTotal(studentIndex);
                    });
                    
                    const increaseBtn = document.createElement('button');
                    increaseBtn.className = 'quantity-btn';
                    increaseBtn.innerHTML = '<i class="fas fa-plus"></i>';
                    increaseBtn.onclick = function() {
                        const input = quantityInput;
                        const currentValue = parseInt(input.value);
                        input.value = currentValue + 1;
                        saveQuantity(studentIndex, itemIndex, currentValue + 1);
                        calculateStudentTotal(studentIndex);
                    };
                    
                    quantitySelector.appendChild(decreaseBtn);
                    quantitySelector.appendChild(quantityInput);
                    quantitySelector.appendChild(increaseBtn);
                    
                    stationaryItem.appendChild(itemLabel);
                    stationaryItem.appendChild(itemPrice);
                    stationaryItem.appendChild(quantitySelector);
                    
                    // Add click event for selection
                    stationaryItem.addEventListener('click', function(e) {
                        // Don't trigger if clicking on quantity controls
                        if (e.target.closest('.quantity-selector')) {
                            return;
                        }
                        
                        toggleStationarySelection(studentIndex, itemIndex);
                    });
                    
                    // Add remove selection button
                    const removeSelection = document.createElement('div');
                    removeSelection.className = 'remove-selection';
                    removeSelection.innerHTML = '<i class="fas fa-times"></i>';
                    removeSelection.onclick = function(e) {
                        e.stopPropagation();
                        deselectStationaryItem(studentIndex, itemIndex);
                    };
                    
                    stationaryItem.appendChild(removeSelection);
                    
                    stationaryList.appendChild(stationaryItem);
                });
                
                stationaryCell.appendChild(stationaryList);
                
                // Total cell
                const totalCell = document.createElement('td');
                totalCell.className = 'student-total';
                totalCell.id = `student-total-${studentIndex}`;
                totalCell.textContent = '₹0';
                
                row.appendChild(studentCell);
                row.appendChild(stationaryCell);
                row.appendChild(totalCell);
                
                tableBody.appendChild(row);
            });
            
            // Calculate initial totals for all students
            students.forEach((student, index) => {
                calculateStudentTotal(index);
            });
            
            // Initialize summaries
            initializeSummaries();
            
            // Update selected items count
            updateSelectedItemsCount();
        }
        
        // Toggle stationary item selection
        function toggleStationarySelection(studentIndex, itemIndex) {
            const stationaryItem = document.querySelector(`[data-student-index="${studentIndex}"][data-item-index="${itemIndex}"]`);
            const quantityInput = stationaryItem.querySelector('.quantity-input');
            
            if (stationaryItem.classList.contains('selected')) {
                // Deselect
                stationaryItem.classList.remove('selected');
                quantityInput.value = 0;
                saveQuantity(studentIndex, itemIndex, 0);
            } else {
                // Select
                stationaryItem.classList.add('selected');
                quantityInput.value = 1;
                saveQuantity(studentIndex, itemIndex, 1);
            }
            
            calculateStudentTotal(studentIndex);
            updateSelectedItemsCount();
            showNotification(`Item ${stationaryItem.querySelector('span').textContent} ${stationaryItem.classList.contains('selected') ? 'selected' : 'deselected'}`);
        }
        
        // Deselect specific stationary item
        function deselectStationaryItem(studentIndex, itemIndex) {
            const stationaryItem = document.querySelector(`[data-student-index="${studentIndex}"][data-item-index="${itemIndex}"]`);
            const quantityInput = stationaryItem.querySelector('.quantity-input');
            
            stationaryItem.classList.remove('selected');
            quantityInput.value = 0;
            saveQuantity(studentIndex, itemIndex, 0);
            
            calculateStudentTotal(studentIndex);
            updateSelectedItemsCount();
        }
        
        // Update selected items count
        function updateSelectedItemsCount() {
            const selectedItems = document.querySelectorAll('.stationary-item.selected').length;
            const selectedCount = document.getElementById('selectedCount');
            const selectionIndicator = document.getElementById('selectionIndicator');
            
            selectedCount.textContent = selectedItems;
            
            if (selectedItems > 0) {
                selectionIndicator.classList.add('show');
            } else {
                selectionIndicator.classList.remove('show');
            }
        }
        
        // Save quantity to localStorage
        function saveQuantity(studentIndex, itemIndex, quantity) {
            localStorage.setItem(`student-${studentIndex}-item-${itemIndex}-quantity`, quantity);
        }
        
        // Calculate total for a specific student
        function calculateStudentTotal(studentIndex) {
            let studentTotal = 0;
            const row = document.querySelector(`#tableBody tr:nth-child(${studentIndex + 1})`);
            const quantityInputs = row.querySelectorAll('.quantity-selector input');
            
            stationaryItems.forEach((item, itemIndex) => {
                const quantity = parseInt(quantityInputs[itemIndex].value) || 0;
                studentTotal += item.price * quantity;
            });
            
            document.getElementById(`student-total-${studentIndex}`).textContent = `₹${studentTotal}`;
        }
        
        // Initialize summaries
        function initializeSummaries() {
            // Initialize with empty data
            const stationarySummary = document.getElementById('stationarySummary');
            stationarySummary.innerHTML = '<li class="summary-item">No data available</li>';
            
            const topStudents = document.getElementById('topStudents');
            topStudents.innerHTML = '<li class="summary-item">No data available</li>';
        }
        
        // Calculate all totals
        function calculateAllTotals() {
            showLoadingSpinner();
            
            setTimeout(() => {
                let grandTotal = 0;
                const itemCounts = {};
                
                // Initialize item counts
                stationaryItems.forEach(item => {
                    itemCounts[item.name] = 0;
                });
                
                students.forEach((student, studentIndex) => {
                    let studentTotal = 0;
                    const row = document.querySelector(`#tableBody tr:nth-child(${studentIndex + 1})`);
                    const quantityInputs = row.querySelectorAll('.quantity-selector input');
                    
                    stationaryItems.forEach((item, itemIndex) => {
                        const quantity = parseInt(quantityInputs[itemIndex].value) || 0;
                        if (quantity > 0) {
                            studentTotal += item.price * quantity;
                            itemCounts[item.name] += quantity;
                        }
                    });
                    
                    document.getElementById(`student-total-${studentIndex}`).textContent = `₹${studentTotal}`;
                    grandTotal += studentTotal;
                });
                
                document.getElementById('grandTotal').textContent = `₹${grandTotal}`;
                
                // Update stationary summary
                updateStationarySummary(itemCounts);
                
                // Update top students
                updateTopStudents();
                
                hideLoadingSpinner();
                showNotification('Total calculated successfully!');
            }, 500);
        }
        
        // Update stationary summary
        function updateStationarySummary(itemCounts) {
            const summaryList = document.getElementById('stationarySummary');
            summaryList.innerHTML = '';
            
            // Sort items by total quantity
            const sortedItems = Object.entries(itemCounts)
                .filter(([name, count]) => count > 0)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            if (sortedItems.length === 0) {
                summaryList.innerHTML = '<li class="summary-item">No data available</li>';
                return;
            }
            
            sortedItems.forEach(([itemName, totalQuantity]) => {
                const item = stationaryItems.find(i => i.name === itemName);
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <span class="summary-item">${itemName} (${totalQuantity} units)</span>
                    <span class="summary-value">₹${item.price * totalQuantity}</span>
                `;
                summaryList.appendChild(listItem);
            });
        }
        
        // Update top students
        function updateTopStudents() {
            const topStudentsList = document.getElementById('topStudents');
            topStudentsList.innerHTML = '';
            
            const studentTotals = [];
            
            students.forEach((student, index) => {
                const totalElement = document.getElementById(`student-total-${index}`);
                const total = parseInt(totalElement.textContent.replace('₹', ''));
                studentTotals.push({ name: student.name, total });
            });
            
            // Sort students by total
            const sortedStudents = studentTotals
                .filter(student => student.total > 0)
                .sort((a, b) => b.total - a.total)
                .slice(0, 5);
            
            if (sortedStudents.length === 0) {
                topStudentsList.innerHTML = '<li class="summary-item">No data available</li>';
                return;
            }
            
            sortedStudents.forEach((student, index) => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <span class="summary-item">${index + 1}. ${student.name}</span>
                    <span class="summary-value">₹${student.total}</span>
                `;
                topStudentsList.appendChild(listItem);
            });
        }
        
        // Clear all selections
        function clearAllSelections() {
            students.forEach((student, studentIndex) => {
                const quantityInputs = document.querySelectorAll(`#tableBody tr:nth-child(${studentIndex + 1}) .quantity-selector input`);
                quantityInputs.forEach((input, itemIndex) => {
                    input.value = 0;
                    saveQuantity(studentIndex, itemIndex, 0);
                    
                    // Remove selection visual state
                    const stationaryItem = document.querySelector(`[data-student-index="${studentIndex}"][data-item-index="${itemIndex}"]`);
                    if (stationaryItem) {
                        stationaryItem.classList.remove('selected');
                    }
                });
                
                document.getElementById(`student-total-${studentIndex}`).textContent = '₹0';
            });
            
            document.getElementById('grandTotal').textContent = '₹0';
            
            // Clear summaries
            initializeSummaries();
            
            // Update selected items count
            updateSelectedItemsCount();
            
            showNotification('All selections cleared!');
        }
        
        // Select all items (set quantity to 1 for all items)
        function selectAllItems() {
            students.forEach((student, studentIndex) => {
                const quantityInputs = document.querySelectorAll(`#tableBody tr:nth-child(${studentIndex + 1}) .quantity-selector input`);
                quantityInputs.forEach((input, itemIndex) => {
                    input.value = 1;
                    saveQuantity(studentIndex, itemIndex, 1);
                    
                    // Add selection visual state
                    const stationaryItem = document.querySelector(`[data-student-index="${studentIndex}"][data-item-index="${itemIndex}"]`);
                    if (stationaryItem) {
                        stationaryItem.classList.add('selected');
                    }
                });
            });
            
            calculateAllTotals();
            updateSelectedItemsCount();
        }
        
        // Deselect all items (set quantity to 0 for all items)
        function deselectAllItems() {
            clearAllSelections();
        }
        
        // Export to CSV
        function exportToCSV() {
            let csv = 'Student Name,';
            
            // Add headers for stationary items
            stationaryItems.forEach(item => {
                csv += `${item.name} (Qty),`;
            });
            
            csv += 'Total\n';
            
            // Add student data
            students.forEach((student, studentIndex) => {
                csv += `${student.name},`;
                
                let studentTotal = 0;
                const row = document.querySelector(`#tableBody tr:nth-child(${studentIndex + 1})`);
                const quantityInputs = row.querySelectorAll('.quantity-selector input');
                
                stationaryItems.forEach((item, itemIndex) => {
                    const quantity = parseInt(quantityInputs[itemIndex].value) || 0;
                    csv += `${quantity},`;
                    
                    if (quantity > 0) {
                        studentTotal += item.price * quantity;
                    }
                });
                
                csv += `${studentTotal}\n`;
            });
            
            // Create download link
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'U4_Stationary_List.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Data exported successfully!');
        }
        
        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = 'notification show';
            
            if (type === 'error') {
                notification.classList.add('error');
            } else if (type === 'warning') {
                notification.classList.add('warning');
            }
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Show loading spinner
        function showLoadingSpinner() {
            document.getElementById('loadingSpinner').style.display = 'block';
        }
        
        // Hide loading spinner
        function hideLoadingSpinner() {
            document.getElementById('loadingSpinner').style.display = 'none';
        }
        
        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('#tableBody tr');
            
            rows.forEach(row => {
                const studentName = row.getAttribute('data-name');
                if (studentName.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
        
        // Initialize the page
        window.onload = function() {
            // Check if already logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn === 'true') {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser) {
                    document.getElementById('loginContainer').classList.add('hidden');
                    showUserInfo(currentUser.username, currentUser.name);
                    generateTableRows();
                    document.getElementById('totalStudents').textContent = students.length;
                    document.getElementById('totalStationaryItems').textContent = stationaryItems.length;
                }
            }
        };
    </script>
</body>
</html>